aW1wb3J0IHsgQ29tcG9uZW50Rml4dHVyZSwgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7CgppbXBvcnQgeyBHcmVldGluZ0NvbXBvbmVudCB9IGZyb20gJy4vZ3JlZXRpbmcuY29tcG9uZW50JzsKCmRlc2NyaWJlKCdHcmVldGluZ0NvbXBvbmVudCcsICgpID0-IHsKICBsZXQgY29tcG9uZW50OiBHcmVldGluZ0NvbXBvbmVudDsKICBsZXQgZml4dHVyZTogQ29tcG9uZW50Rml4dHVyZTxHcmVldGluZ0NvbXBvbmVudD47CgogIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4gewogICAgYXdhaXQgVGVzdEJlZC5jb25maWd1cmVUZXN0aW5nTW9kdWxlKHsKICAgICAgZGVjbGFyYXRpb25zOiBbIEdyZWV0aW5nQ29tcG9uZW50IF0KICAgIH0pCiAgICAuY29tcGlsZUNvbXBvbmVudHMoKTsKCiAgICBmaXh0dXJlID0gVGVzdEJlZC5jcmVhdGVDb21wb25lbnQoR3JlZXRpbmdDb21wb25lbnQpOwogICAgY29tcG9uZW50ID0gZml4dHVyZS5jb21wb25lbnRJbnN0YW5jZTsKICAgIGZpeHR1cmUuZGV0ZWN0Q2hhbmdlcygpOwogIH0pOwoKICBpdCgnc2hvdWxkIGNyZWF0ZScsICgpID0-IHsKICAgIGV4cGVjdChjb21wb25lbnQpLnRvQmVUcnV0aHkoKTsKICB9KTsKfSk7Cg