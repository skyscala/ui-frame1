aW1wb3J0IHsgQ29tcG9uZW50Rml4dHVyZSwgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7CgppbXBvcnQgeyBGaXhpbmdOb3RpQ29tcG9uZW50IH0gZnJvbSAnLi9maXhpbmctbm90aS5jb21wb25lbnQnOwoKZGVzY3JpYmUoJ0ZpeGluZ05vdGlDb21wb25lbnQnLCAoKSA9PiB7CiAgbGV0IGNvbXBvbmVudDogRml4aW5nTm90aUNvbXBvbmVudDsKICBsZXQgZml4dHVyZTogQ29tcG9uZW50Rml4dHVyZTxGaXhpbmdOb3RpQ29tcG9uZW50PjsKCiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7CiAgICBhd2FpdCBUZXN0QmVkLmNvbmZpZ3VyZVRlc3RpbmdNb2R1bGUoewogICAgICBkZWNsYXJhdGlvbnM6IFsgRml4aW5nTm90aUNvbXBvbmVudCBdCiAgICB9KQogICAgLmNvbXBpbGVDb21wb25lbnRzKCk7CgogICAgZml4dHVyZSA9IFRlc3RCZWQuY3JlYXRlQ29tcG9uZW50KEZpeGluZ05vdGlDb21wb25lbnQpOwogICAgY29tcG9uZW50ID0gZml4dHVyZS5jb21wb25lbnRJbnN0YW5jZTsKICAgIGZpeHR1cmUuZGV0ZWN0Q2hhbmdlcygpOwogIH0pOwoKICBpdCgnc2hvdWxkIGNyZWF0ZScsICgpID0-IHsKICAgIGV4cGVjdChjb21wb25lbnQpLnRvQmVUcnV0aHkoKTsKICB9KTsKfSk7Cg